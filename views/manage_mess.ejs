<%- include('partials/header_sidebar') %>

<style>
    /* Manage Mess responsive styles */
    @media (max-width: 767.98px) {
        .table { font-size: 0.85rem; }
        .table thead { display: none; }
        .table tbody { display: block; }
        .table tr {
            display: block;
            margin-bottom: 15px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 12px;
        }
        .table td {
            display: block;
            text-align: left;
            padding: 8px 0;
            border: none;
        }
        .table td.fw-bold {
            font-weight: bold;
            font-size: 1rem;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .form-control { font-size: 14px; padding: 8px; }
    }

    @media (max-width: 575.98px) {
        .card { padding: 12px !important; }
        .form-control { width: 100%; margin-bottom: 6px; }
        .d-flex.gap-2 { flex-direction: column; gap: 8px; }
        .d-flex.gap-2 .btn { width: 100%; }
    }
</style>

<div class="content-wrapper">
    <div class="container" style="max-width: 1000px; min-height: 80vh;">
        
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="fw-bold mb-0" style="font-family: 'Cinzel'; color: #D4AF37;">Weekly Mess Menu</h2>
                <p class="text-muted small">Update the food schedule for your students</p>
            </div>
            <a href="/owner_dashboard" class="btn btn-outline-dark rounded-pill">Skip for Now</a>
        </div>

        <div class="card border-0 shadow-sm p-4">
            <form action="/manage_mess" method="POST">
                <input type="hidden" name="hostel_id" value="<%= hostel_id %>">
                
                <div class="table-responsive">
                    <table class="table table-bordered align-middle text-center">
                        <thead class="bg-dark text-white">
                            <tr>
                                <th style="width: 15%;">Day</th>
                                <th>Breakfast</th>
                                <th>Lunch</th>
                                <th>Dinner</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% 
                            const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                            daysOfWeek.forEach(day => { 
                                let current = (menu && menu[day]) || {};
                            %>
                                <tr>
                                    <td class="fw-bold bg-light">
                                        <%= day %>
                                        <input type="hidden" name="day[]" value="<%= day %>">
                                    </td>
                                    <td>
                                        <input type="text" name="bkf[]" class="form-control border-0 bg-light text-center" 
                                               placeholder="e.g. Paratha + Egg" value="<%= current.breakfast || '' %>">
                                    </td>
                                    <td>
                                        <input type="text" name="lun[]" class="form-control border-0 bg-light text-center" 
                                               placeholder="e.g. Biryani" value="<%= current.lunch || '' %>">
                                    </td>
                                    <td>
                                        <input type="text" name="din[]" class="form-control border-0 bg-light text-center" 
                                               placeholder="e.g. Chicken Karahi" value="<%= current.dinner || '' %>">
                                    </td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>

                <div class="d-flex justify-content-end mt-4 gap-2">
                    <a href="/owner_dashboard" class="btn btn-light border">Cancel</a>
                    <button type="submit" class="btn btn-gold px-5 fw-bold shadow-sm">Save Menu & Finish</button>
                </div>
            </form>
        </div>
    </div>
</div>

<%- include('partials/footer') %>